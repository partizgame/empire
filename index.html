<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Empire Idle: Stars</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
body {
  font-family: Arial, sans-serif;
  background: #0e1117;
  color: white;
  text-align: center;
  padding-top: 40px;
}
button {
  padding: 15px 25px;
  font-size: 18px;
  border-radius: 10px;
  border: none;
  background: gold;
  cursor: pointer;
}
</style>
</head>

<body>
<h1>Empire Idle ⭐</h1>

<button onclick="buyVIP()">Купить VIP (30 дней)</button>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

async function buyVIP() {
  try {
    const res = await fetch("http://localhost:3000/create-invoice", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ product: "VIP_30" })
    });

    const data = await res.json();

    if (data.invoice_link) {
      tg.openInvoice(data.invoice_link);
    } else {
      tg.showAlert("Ошибка создания счёта");
    }
  } catch (e) {
    tg.showAlert("Backend недоступен");
  }
}
</script>

</body>
</html>
